<html>
   <head>

    <link href="https://fonts.googleapis.com/css?family=Montserrat:900|Work+Sans:300" rel="stylesheet">
      
    <script src="https://code.jquery.com/jquery-2.1.1.min.js" type="text/javascript"></script>
    <script>
        /*$(document).ready(function(){
            setInterval(function(){$("#screen").load('http://raspberrypi:8081/value')}, 2000);


        });
                    */
        var myVar = setInterval(myTimer, 1000);

        function myTimer() {
            var d = new Date();
            var t = d.toLocaleTimeString();
            document.getElementById("screen").innerHTML = t;

            loadValue();
        }      
        
        function loadValue(){
            $.get("http://raspberrypi:8081/value", function(data, status){
                 var myObj = JSON.parse(data);
                 var x = myObj.timestamp - myObj.sessionStartDate
                 var d = new Date(myObj.sessionStartDate);
                 //var d = new Date(myObj.timestamp);
                 document.getElementById("a").innerHTML = format_sec(myObj.sessionElapsedTime / 1000)
                 document.getElementById("b").innerHTML = (JSON.stringify(myObj.totalDistance) / 10 )+  " meter"
                 document.getElementById("c").innerHTML = JSON.stringify(myObj.currentStrokerate) + " spm"
                 document.getElementById("d").innerHTML = JSON.stringify(myObj.totalStrokes) + " strokes"
                 document.getElementById("e").innerHTML = format_sec (5000 / JSON.stringify(myObj.currentSpeed)) + " split"

                document.getElementById("f").innerHTML = String(d.getHours())  + ":"  + String(d.getMinutes())  + ":" + String(d.getSeconds())


                 
                 //alert("Data: " + data + "\nStatus: " + status);
             });
           
        }

            function  format_sec(seconds) {

            var measuredTime = new Date(null)
            measuredTime.setSeconds(parseInt(seconds)) // specify value of SECONDS
            var MHSTime = measuredTime.toISOString().substr(11, 8)
            return MHSTime
            }

    </script>
    <link rel="stylesheet" type="text/css" href="mystyle.css">  


   </head>



   
    <body>


       <div class="navbar">
        <a href="#home">Home</a>
        <a href="#admin">Admin</a>
        <a href="#console">Console</a>
    

      </div>

      <div id="screen", title="wr">palaver</div>
      
      <div class="main">
        <div class="cards">
            <div class="card", id="a">TWO</div>
            <div class="card", id="b">TWO</div>
            <div class="card", id="c">TWO</div>
            <div class="card", id="d">TWO</div>
            <div class="card", id="e">TWO</div>
            <div class="card", id="f">TWO</div>
            
          </div>
      </div>


    </body>

</html>